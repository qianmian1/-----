"use strict";const e=require("../../common/vendor.js"),a={__name:"token",setup(a){let t=e.ref(""),i=e.ref(""),n=e.ref(!1),d="";function o(){e.index.showLoading({title:"请求中",mask:!0}),n.value?e.index.request({url:"https://"+t.value+"opencommand/api",method:"POST",data:{action:"verify",token:d,data:+i.value}}).then((a=>{"Success"==a.data.message?(e.index.hideLoading(),getApp().globalData.ServiceIp=t.value,getApp().globalData.Plugins=a.data.toekn,getApp().globalData.copy=!1,e.index.showToast({title:"验证成功",icon:"success"}),e.index.redirectTo({url:"/pages/user/user"})):(e.index.hideLoading(),e.index.showToast({title:"验证失败",icon:"error"}))})):e.index.request({url:"https://"+t.value+"/opencommand/api",method:"POST",data:{action:"sendCode",data:Number(i.value)}}).then((a=>{if(null==a.data.data)return e.index.hideLoading(),void e.index.showToast({title:"发送失败",icon:"error"});e.index.hideLoading(),d=a.data.data,n.value=!0}))}return(a,d)=>e.e({a:e.unref(t),b:e.o((a=>e.isRef(t)?t.value=a.detail.value:t=a.detail.value)),c:e.unref(i),d:e.o((a=>e.isRef(i)?i.value=a.detail.value:i=a.detail.value)),e:e.unref(n)},(e.unref(n),{}),{f:e.o(o)})}};wx.createPage(a);
